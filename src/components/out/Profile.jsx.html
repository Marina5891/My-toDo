<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Profile.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Profile.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { useUserDocs } from '../contexts/UserDocsContext';
import dayjs from 'dayjs';

/**
 * Компонента Profile, отрисовывающая главную станицу профиля пользователя
 */

export const Profile = () => {
  /**
   * tasks - массив задач, полученных из базы данных, 
   * doneTask - функция, меняющая статус задачи на true или false,
   * loadDocs - функция, получающая список задач из базы данных,
   * deleteTask - функция, удаляющая задачу, 
   * setEditTaskId - функция, устанавливающая id редактируемой задачи
   * для использования в компоненте EditTask,
   * полученные из UserDocsContextProvider
   */
  const {
    tasks,
    doneTask,
    loadDocs,
    deleteTask,
    setEditTaskId } = useUserDocs();
  /** Переменная, отображающая текущее время */
  const currentDate = dayjs();
  const navigate = useNavigate();

  /** Вызывает функцию загрузки списка задач */
  useEffect(() => {
    loadDocs();
  }, []);
  /** Удаляет задачу
   * @param {string} taskId
   */
  const handleRemoveTask = (taskId) => {
    deleteTask(taskId)
  }

  /** Переходит на страницу редактирования задачи
   * @param {string} taskId
   */

  const handleEditTask = (taskId) => {
    setEditTaskId(taskId);
    navigate(`editTask:${taskId}`);
  }
  /** Изменяет статус готовности задачи
   * @param {string} taskId
   * @param {boolean} status
   */
  const handleStatusTask = (taskId, status) => {
    doneTask(taskId, status);
  }

  return (
    &lt;main>
      &lt;h1 className='formTitle'>Мои задачи&lt;/h1>
      &lt;Link type='button' to='createTask' className='createTask' />
      &lt;div className='taskList'>
        {
          tasks &amp;&amp; tasks.map(task => {
            const dateCompletion = dayjs(task.completionDate);

            return (
              &lt;div className='taskItem' key={task.id}>
                &lt;h3>{task.title}&lt;/h3>
                &lt;p>{task.description}&lt;/p>
                &lt;div className='dateCompletionTask'>
                  &lt;span>Статус: &lt;/span>
                  {
                    dateCompletion &lt; currentDate &amp;&amp;
                    &lt;span>Ну как так можно? А?&lt;/span>
                  }
                  {
                    dateCompletion >= currentDate &amp;&amp;
                    &lt;span>Еще есть время все успеть&lt;/span>
                  }
                &lt;/div>
                &lt;div className='statusButtons'>
                  &lt;button
                    className={task.status ? 'done' : 'notDone'}
                    title='Готово'
                    onClick={(e) => handleStatusTask(task.id, task.status)} />
                  &lt;button
                    className='edit'
                    title='Редактировать'
                    onClick={() => handleEditTask(task.id)} />
                  &lt;button
                    className='remove'
                    title='Удалить'
                    onClick={() => handleRemoveTask(task.id)} />
                &lt;/div>
              &lt;/div>

            )
          })
        }
      &lt;/div>
    &lt;/main>
  )
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Profile">Profile</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Fri Nov 25 2022 21:45:49 GMT+0500 (Западный Казахстан)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
